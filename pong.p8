pico-8 cartridge // http://www.pico-8.com
version 27
__lua__
-- menu (implement later)
function _init() menu_init() end

function menu_init()
 _draw=menu_draw
 _update=menu_update
end

function menu_update()
 game_init()
end

function menu_draw()
end
-->8
-- game

--[[
todo
 * win/lose condition
 * paddle ai
 * menu
 * sounds [bounce, paddle, score, win, lose, menu]
 * add one button to change ball direction one time
--]]

function game_init()
 _update=game_update
 _draw=game_draw
 
p={}
  p.w=1.5
  p.h=20
  p.x=4
  p.y=64-(p.h/2)
  p.s=3
  p.score=0
e={}
  e.w=1.5
  e.h=20
  e.x=123
  e.y=64-(p.h/2)
  e.s=3
  e.score=0
b={}
  b.x=64
  b.y=64
  b.w=2
  b.h=2
  b.sx=-2
  b.sy=-2
end

function player()
  if btn(3) and p.y+p.h<102 then
    p.y+=p.s
  elseif btn(2) and p.y>22 then
    p.y-=p.s 
  end
end

function enemy()
  if e.y+e.h>102 or e.y<22 then
    e.s=~e.s
  end
  e.y+=e.s
end

function ball()
  if b.x>133 then b.x=64 b.y=64 p.score+=1 end
  if b.x<-5 then b.x=64 b.y=64 e.score+=1 end
  if b.y+b.h>=102 or b.y<=23 then
    b.sy=~b.sy
  end
  if b.x<=p.x and b.x>=p.x-p.w and b.y>=p.y and b.y<=p.y+p.h or b.x>=e.x and b.x<=e.x+e.w and b.y>=e.y and b.y<=e.y+e.h then
    b.sx=~b.sx
  end

  b.x+=b.sx
  b.y+=b.sy
end

function game_update()
  player()
  enemy()
  ball()
end

function game_draw()
 cls()
 map(0,0,0,0,32,32)
 rectfill(p.x,p.y,p.x+p.w,p.y+p.h,7)
 rectfill(e.x,e.y,e.x+e.w,e.y+e.h,7)
 rectfill(b.x,b.y,b.x+b.w,b.y+b.h,7)
 print(p.score..'-'..e.score,58,10,7)
end
__gfx__
00000000777777770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000007777777700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0202020202020202020202020202020200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0101010101010101010101010101010100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
